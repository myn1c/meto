<p align="center">
    <img src="doc/meto.png" width="100" height="100">
    <br>
    <b>METO</b>
    <br>
    Автоматический клиент-сервер для работы с ESP32
</p>

---

## Содержание
1. [Установка](#установка)
2. [Автоматический установщик](#автоматический-установщик)
3. [Вручную](#вручную)
4. [Сайт](#сайт)
5. [Эндпоинты](#эндпоинты)
6. [Пример консоли](#пример-консоли-работы-сервера)

---

## Установка
Скачайте [установщик](https://github.com/myn1c/meto/releases/tag/installer) или проект.

---

## Автоматический установщик

Пример работы с `installer.go`:

```text
Это автоматический настройщик клиентской части meto
Введите название сети ESP: Ufanet
Введите пароль от сети: Password
Введите порт (по умолчанию 8080): 
Введите IP host (или Auto для локального IP): Auto

Название сети: Ufanet
Пароль: Password
Порт: 8080
Хост: 169.254.142.85
Файл client_esp32.py успешно создан!

Получаем список релизов сервера с GitHub...
Найденные серверные релизы:
[1] windows
[2] kubuntu
Выберите номер релиза для скачивания: 1
Скачиваем server.exe
Сервер сохранён: server.exe
Запустить сервер? (y/n): y
Убедились, что client_esp32.py на месте - запускаем server.exe
````

---

## Вручную

Если хотите настроить клиент вручную, замените переменные в `client_esp32.py`:

```python
SSID = "Название сети"
PASS = "Пароль сети"

API_HOST = "ip хоста"
API_PORT = порт
```

IP хоста можно узнать с помощью:

```python
import socket

def get_local_ip():
    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    try:
        s.connect(("8.8.8.8", 80))
        return s.getsockname()[0]
    except:
        return None
    finally:
        s.close()

print("IP:", get_local_ip())
```

Команда для запуска сервера на Linux:

```bash
./server
```

---

## Сайт

Сайт будет выглядеть примерно так по пути `/`:

<p align="center">
    <img src="doc/Metoсайта.jpeg" alt="Скрин сайта" width="400">
</p>

---

## Эндпоинты

* `../` — возвращает главную страницу
* `../data/` — добавление изменений (temp="температура", humidity="влажность")

---

## Пример консоли работы сервера

<p align="center">
    <img src="doc/Cmd.png" alt="Консоль сервера" width="600">
</p>

